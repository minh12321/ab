<div>
<h2>Product Management</h2>
<div class="taa">
<div class="container">
    <h2>Th√™m S·∫£n Ph·∫©m</h2>
    <form (ngSubmit)="submitProduct()">
      <label for="tenSanPham">T√™n S·∫£n Ph·∫©m:</label>
      <input id="tenSanPham" [(ngModel)]="newProduct.tenSanPham" name="tenSanPham" required>

      <label for="gia">Gi√°:</label>
      <input id="gia" type="number" [(ngModel)]="newProduct.gia" name="gia" required>

      <label for="soLuong">S·ªë L∆∞·ª£ng:</label>
      <input id="soLuong" type="number" [(ngModel)]="newProduct.soLuong" name="soLuong" required>

      <label for="mauSac">M√†u:</label>
      <input id="mauSac" type="text" [(ngModel)]="newProduct.mauSac" name="mauSac" required>

      <label for="size">Size:</label>
      <input id="size" type="text" [(ngModel)]="newProduct.size" name="size" required>

      <label for="moTa">M√¥ T·∫£:</label>
      <textarea id="moTa" rows="3" [(ngModel)]="newProduct.moTa" name="moTa" required></textarea>

      <label for="file">Ho·∫∑c ch·ªçn ·∫£nh:</label>
      <input type="file" id="file" (change)="onFileSelected($event)">

      <div *ngIf="newProduct.hinhAnh" class="image-preview">
        <p>·∫¢nh s·∫£n ph·∫©m:</p>
        <img [src]="newProduct.hinhAnh" alt="·∫¢nh s·∫£n ph·∫©m" width="100">
      </div>

      <button type="submit">L∆∞u S·∫£n Ph·∫©m</button>
    </form>
  </div>
    <div 
    class="drop-area" 
    (dragover)="onDragOver($event)" 
    (dragleave)="onDragLeave($event)" 
    (drop)="onDrop($event)">
    <p>K√©o ·∫£nh v√†o ƒë√¢y ho·∫∑c ch·ªçn ·∫£nh b√™n d∆∞·ªõi</p>
    <img *ngIf="previewImage" [src]="previewImage" width="200" />
    </div>
  </div>
  <!-- Product List -->
  <h2>Danh s√°ch s·∫£n ph·∫©m</h2>
  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>T√™n s·∫£n ph·∫©m</th>
        <th>M√†u</th>
        <th>M√¥ t·∫£</th>
        <th>Size</th>
        <th>S·ªë l∆∞·ª£ng</th>
        <th>Gi√°</th>
        <th>H√¨nh ·∫£nh</th>
        <th>Thao t√°c</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let product of filteredsp">
        <td>{{ product.maSanPham }}</td>
        <td>{{ product.tenSanPham }}</td>
        <td>{{ product.mauSac }}</td>
        <td>{{ product.moTa }}</td>
        <td>{{ product.size }}</td>
        <td>{{ product.soLuong }}</td>
        <td>{{ product.gia | currency:'VND' }}</td>
        <td>
          <img *ngIf="product.hinhAnh" [src]="apiUrl + '/api/upload/' + product.hinhAnh" width="80" alt="H√¨nh ·∫£nh">
        </td>
        <td>
          <button (click)="deleteProduct(product)" style="padding: 5px 10px; border: none; background: #f44336; color: white; border-radius: 4px;">X√≥a</button>
        </td>
      </tr>
    </tbody>
  </table>
  <button class="refresh-button" (click)="exportToExcel()">üìÅ Xu·∫•t Excel</button>
  <button class="refresh-button" (click)="getAllProducts()">T·∫£i l·∫°i danh s√°ch</button>
  <div class="search-bar">
    <input type="text" [(ngModel)]="search" (input)="searchsp()" placeholder="T√™n s·∫£n ph·∫©m ho·∫∑c id...">
</div>

</div>